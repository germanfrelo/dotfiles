{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash

# Exit immediately if a command exits with a non-zero status.
set -eufo pipefail

echo "Ensuring chezmoi is adopted and configured..."

if ! command -v chezmoi &> /dev/null; then
	echo "chezmoi not found. Please install it manually or ensure it's in your PATH."
	exit 1
fi

# Run chezmoi adopt to link its config file
# This command should be run by chezmoi itself, not via brew bundle
chezmoi adopt || true # Use || true to prevent script from failing if adopt finds no changes
echo "chezmoi adoption process complete."

{{- end -}}
